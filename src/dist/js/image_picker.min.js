jQuery(function($){$(".pomatio-framework-image-wrapper .image-wrapper").each(function(){let $this=$(this);if($this.find("img").length){$(this).closest(".pomatio-framework-image-wrapper").find(".remove-selected-image").css("display","inherit")}});let $media_modal;let $clicked_button;$(document).on("click",".open-image-picker",function(e){e.preventDefault();$clicked_button=$(this);if($media_modal){$media_modal.open();return}$media_modal=wp.media.frames.file_frame=wp.media({title:pom_form_image_picker.title,button:{text:pom_form_image_picker.button},multiple:false});$media_modal.on("select",function(){let $attachment=$media_modal.state().get("selection").first().toJSON();$clicked_button.closest(".pomatio-framework-image-wrapper").find('input[type="url"]').val($attachment.url);$clicked_button.closest(".pomatio-framework-image-wrapper").find(".image-wrapper").empty().append('<img width="280px" alt="" src="'+$attachment.url+'">');$clicked_button.closest(".pomatio-framework-image-wrapper").find(".remove-selected-image").css("display","inherit")});$media_modal.open()});$(document).on("click",".pomatio-framework-image-wrapper .remove-selected-image",function(e){e.preventDefault();let $this=$(this);let $wrapper=$this.closest(".pomatio-framework-image-wrapper");$wrapper.find(".image-wrapper").empty();$wrapper.find('input[type="url"]').val("");$this.css("display","none")})});
