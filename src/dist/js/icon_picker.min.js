jQuery((function(o){if(void 0===o.fn.dialog)return;let e;o(".icon-picker-wrapper .icon-wrapper").each((function(){o(this).find("img").length&&o(this).closest(".icon-picker-wrapper").find(".remove-selected-icon").css("display","inherit")}));let a=o("#pomatio-framework-icons-modal").dialog({title:"",dialogClass:"wp-dialog pomatio-framework-icons-modal",autoOpen:!1,draggable:!1,minHeight:"95%",width:"95%",modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"top",at:"top+25",of:window},open:function(){o(".ui-widget-overlay").on("click",(function(){o("#pomatio-framework-icons-modal").dialog("close")}))},close:function(){o("#pomatio-framework-icons-modal .media-menu-item").removeClass("active").attr("aria-selected",""),o("#pomatio-framework-icons-modal .media-frame-content").empty().append('<span class="centered-text">'+pom_form_icon_picker.loading+"</span>"),o('.pomatio-framework-icons-modal .media-menu [data-slug="all"]').addClass("active").attr("aria-selected","true");let e=o('.pomatio-framework-icons-modal [data-slug="all"]').attr("data-label");o("#pomatio-framework-icons-modal .media-frame-title").empty().append("<h1>"+e+"</h1>")},create:function(){o(".pomatio-framework-icons-modal .ui-dialog-titlebar").css("display","none"),o('.pomatio-framework-icons-modal .media-menu [data-slug="all"]').addClass("active").attr("aria-selected","true");let e=o('.pomatio-framework-icons-modal [data-slug="all"]').attr("data-label");o("#pomatio-framework-icons-modal .media-frame-title").empty().append("<h1>"+e+"</h1>")}});o(document).on("click",".open-icon-picker-modal",(function(t){t.preventDefault(),e=o(this),a.dialog("open"),o.ajax({url:ajaxurl,method:"POST",data:{action:"pom_form_get_icon_library_icons",library:"all"},success:function(o){a.closest("#pomatio-framework-icons-modal").find(".media-frame-content").empty().append(o)}})})),o(document).on("click",".close-icon-picker-modal",(function(o){o.preventDefault(),a.dialog("close")})),o(document).on("click","#pomatio-framework-icons-modal .media-menu-item",(function(){let e=o(this);o('#pomatio-framework-icons-modal input[type="search"]').val(""),e.closest("#pomatio-framework-icons-modal").find(".media-frame-content").empty().append('<span class="centered-text">'+pom_form_icon_picker.loading+"</span>"),o("#pomatio-framework-icons-modal .media-menu-item").removeClass("active").attr("aria-selected",""),e.addClass("active").attr("aria-selected","true");let a=e.attr("data-slug"),t=e.attr("data-label");e.closest("#pomatio-framework-icons-modal").find(".media-frame-title").empty().append("<h1>"+t+"</h1>"),o.ajax({url:ajaxurl,method:"POST",data:{action:"pom_form_get_icon_library_icons",library:a},success:function(o){e.closest("#pomatio-framework-icons-modal").find(".media-frame-content").empty().append(o)}})})),o(document).on("click","#pomatio-framework-icons-modal li.attachment",(function(e){o("#pomatio-framework-icons-modal li.attachment").removeClass("selected"),o(this).addClass("selected"),o("#pomatio-framework-icons-modal .pomatio-framework-icon-select-button").removeClass("disabled").prop("disabled",!1)})),o(document).on("click","#pomatio-framework-icons-modal .load-more-icons button",(function(){let e=o(this);e.hide(),e.next(".icon-picker-spinner").show();let a=parseInt(e.attr("data-offset")),t=o("#pomatio-framework-icons-modal .media-menu-item.active").attr("data-slug");o.ajax({url:ajaxurl,method:"POST",data:{action:"pom_form_get_icon_library_icons",library:t,offset:a+88},success:function(o){let a=e.closest("#pomatio-framework-icons-modal").find(".media-frame-content");a.find(".load-more-icons").remove(),a.append(o)}})})),o(document).on("click","#pomatio-framework-icons-modal .pomatio-framework-icon-select-button",(function(t){t.preventDefault();let i=o("#pomatio-framework-icons-modal .attachment.selected img").attr("src"),n=e.closest(".icon-picker-wrapper").find('input[type="hidden"]');n.val(i),n[0].dispatchEvent(new Event("input",{bubbles:!0})),e.closest(".icon-picker-wrapper").find(".icon-wrapper").empty().append('<img alt="" src="'+i+'">'),e.closest(".icon-picker-wrapper").find(".remove-selected-icon").css("display","inherit"),a.dialog("close")})),o(document).on("keyup",'#pomatio-framework-icons-modal input[type="search"]',function(o){let e=0;return function(...a){clearTimeout(e),e=setTimeout(o.bind(this,...a),500)}}((function(){let e=o(this),a=e.val(),t=e.closest("#pomatio-framework-icons-modal").find(".media-menu button.active").attr("data-slug");e.closest("#pomatio-framework-icons-modal").find(".media-frame-content").empty().append('<span class="centered-text">'+pom_form_icon_picker.loading+"</span>"),o.ajax({url:ajaxurl,method:"POST",data:{action:"pom_form_get_icon_by_name",search:a,library:t},success:function(o){e.closest("#pomatio-framework-icons-modal").find(".media-frame-content").empty().append(o)}})}))),o(document).on("click",".icon-picker-wrapper .remove-selected-icon",(function(e){e.preventDefault();let a=o(this),t=a.closest(".icon-picker-wrapper");t.find(".icon-wrapper").empty(),t.find('input[type="hidden"]').val(""),a.css("display","none")}))}));