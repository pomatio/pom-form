jQuery((function(t){function e(e,n){const r=[`[data-base-name="${e}"]:input`,`[data-base-name="${e}"]`,`[name="${e}"]`,`[name$="[${e}]"]`,`[name$="[${e}][]"]`,`[name$="_${e}"]`];for(const t of r){let e=n.find(t);if(e.length){if(!e.is(":input")){const t=e.find(":input");if(t.length)return t}return e}}return t()}function n(e){if(!e||!e.length)return"";const n=e.is(":input")?e:e.find(":input");if(!n.length)return"";const r=n.filter(":radio");if(r.length){const t=r.filter(":checked");return t.length&&t.val()||""}const i=n.filter(":checkbox");if(i.length){const e=i.filter(":checked");return e.length?1===i.length?e.val()||"yes":e.map(((e,n)=>t(n).val())).get():""}const c=n.filter("select");if(c.length){const t=c.val();return Array.isArray(t)?t.map(String):t||""}const l=n.first().val();return Array.isArray(l)?l.map(String):l||""}function r(t,e){const n=e.map(String);return Array.isArray(t)?t.some((t=>n.includes(String(t)))):n.includes(String(t))}function i(i,c){const l=function(t){if(!t||!t.getAttribute)return null;let e=t.getAttribute("data-dependencies");if(!e)return null;e=e.replaceAll("'",'"');try{return JSON.parse(e)}catch(t){return null}}(i);if(!l)return;const o=t(i),s=function(e,n){const r=e.closest(".repeater");return r.length?r:n&&n.length?n:t(document)}(o,t(c));let a=!1;for(const t of l){let i=!0;for(const c of t){const t=e(c.field.replace("field_",""),s);if(!t.length){i=!1;break}if(!r(n(t),c.values)){i=!1;break}}if(i){a=!0;break}}!function(t,e){const n=t.closest(".form-group"),r=t.closest("tr"),i=t.closest(".repeater-wrapper").length>0;e?(n.show(),!i&&r.length&&r.show()):(n.hide(),!i&&r.length&&r.hide())}(o,a)}function c(e){const n=t(e||document);n.find("[data-dependencies]").each((function(){i(this,n)}))}t(document).on("change input","input, textarea, select",(function(e){const n=t(e.target).closest(".repeater-wrapper");c(n.length?n:t(document))})),c(),window.pomatioDependencies={handleFieldVisibility:i,initializeFieldVisibility:c}}));