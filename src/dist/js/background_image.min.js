jQuery((function(e){e(".background-image-wrapper").each((function(){let n=e(this),t=n.find('input[type="hidden"]').val();t&&(t=JSON.parse(t),e.each(t,(function(t,i){let a=e(`[name="${t}"]`);if(!a.is(":radio")||"horizontal_alignment"!==t&&"vertical_alignment"!==t)if(a.is(":radio")&&"background-size"===t)if("auto"!==i&&"cover"!==i&&"contain"!==i){n.find(`[name="${t}"][value="custom"]`).prop("checked",!0),n.find(".custom-background-size-wrapper").show();let e=i.split(" ");if(2===e.length){let t=e[0].match(/\d+/),i=e[0].replace(t,"");n.find('[name="custom_background_size_width_number"]').val(t),n.find(`[name="custom_background_size_width_unit"] option[value="${i}"]`).prop("selected",!0);let a=e[1].match(/\d+/),o=e[1].replace(a,"");n.find('[name="custom_background_size_height_number"]').val(a),n.find(`[name="custom_background_size_height_unit"] option[value="${o}"]`).prop("selected",!0),n.find(".custom-background-size-wrapper").show()}}else n.find(`[name="${t}"][value="${i}"]`).prop("checked",!0);else n.closest(".background-image-wrapper").find(`[name="${t}"]`).val(i);else if("left"===i||"center"===i||"right"===i||"bottom"===i||"top"===i)n.find(`[name="${t}"][value="${i}"]`).prop("checked",!0);else{let e=i.match(/\d+/),a=i.replace(e,"");n.find(`[name="${t}"][value="custom"]`).prop("checked",!0),n.find(`.custom-${t}-wrapper`).show(),n.find(`[name="custom_${t}_number"]`).val(e[0]),n.find(`[name="custom_${t}_unit"] option[value="${a}"]`).prop("selected",!0)}})))})),e(document).on("change",'input[name="background-image"]',(function(){let n=e(this),t={};t["background-image"]=n.val(),$set_hidden_value(n,t)})),e(document).on("click",'input[name="horizontal_alignment"]',(function(){let n=e(this);"custom"===n.val()?n.closest(".horizontal-alignment").find(".custom-horizontal_alignment-wrapper").show():n.closest(".horizontal-alignment").find(".custom-horizontal_alignment-wrapper").hide()})),e(document).on("click",'input[name="vertical_alignment"]',(function(){let n=e(this);"custom"===n.val()?n.closest(".vertical-alignment").find(".custom-vertical_alignment-wrapper").show():n.closest(".vertical-alignment").find(".custom-vertical_alignment-wrapper").hide()})),e(document).on("click",'input[name="background-size"]',(function(){let n=e(this);"custom"===n.val()?n.closest(".background-size-wrapper").find(".custom-background-size-wrapper").show():n.closest(".background-size-wrapper").find(".custom-background-size-wrapper").hide()}));let $set_hidden_value=function(n,t){let i=function(e){let n=e.closest(".background-image-wrapper").find('input[type="hidden"]').val();return"[]"===n&&(n={}),n}(n),a={};i.length&&(a=JSON.parse(i)),e.extend(a,t),a["background-position"]=`${a.horizontal_alignment} ${a.vertical_alignment}`;let o=JSON.stringify(a);n.closest(".background-image-wrapper").find('input[type="hidden"]').val(o)};e(document).on("change keyup",'input[name="horizontal_alignment"], input[name="custom_horizontal_alignment_number"], select[name="custom_horizontal_alignment_unit"]',(function(){let n=e(this),t={};if("custom"===n.closest(".horizontal-alignment").find('input[name="horizontal_alignment"]:checked').val()){let e=n.closest(".horizontal-alignment").find('input[name="custom_horizontal_alignment_number"]').val(),i=n.closest(".horizontal-alignment").find('select[name="custom_horizontal_alignment_unit"]').val();t.horizontal_alignment=`${e}${i}`}else t.horizontal_alignment=n.val();$set_hidden_value(n,t)})),e(document).on("change keyup",'input[name="vertical_alignment"], input[name="custom_vertical_alignment_number"], select[name="custom_vertical_alignment_unit"]',(function(){let n=e(this),t={};if("custom"===n.closest(".vertical-alignment").find('input[name="vertical_alignment"]:checked').val()){let e=n.closest(".vertical-alignment").find('input[name="custom_vertical_alignment_number"]').val(),i=n.closest(".vertical-alignment").find('select[name="custom_vertical_alignment_unit"]').val();t.vertical_alignment=`${e}${i}`}else t.vertical_alignment=n.val();$set_hidden_value(n,t)})),e(document).on("click",".restore-radio-icon",(function(){let n=e(this),t=n.closest(".horizontal-alignment").find('input[name="horizontal_alignment"]:checked').val(),i=n.closest(".vertical-alignment").find('input[name="vertical_alignment"]:checked').val(),a=n.closest(".background-size-wrapper").find('input[name="background-size"]:checked').val();"custom"===t?n.closest(".horizontal-alignment").find(".custom-horizontal_alignment-wrapper").show():n.closest(".horizontal-alignment").find(".custom-horizontal_alignment-wrapper").hide(),"custom"===i?n.closest(".vertical-alignment").find(".custom-vertical_alignment-wrapper").show():n.closest(".vertical-alignment").find(".custom-vertical_alignment-wrapper").hide(),"custom"===a?n.closest(".background-size-wrapper").find(".custom-background-size-wrapper").show():n.closest(".background-size-wrapper").find(".custom-background-size-wrapper").hide()})),e(document).on("change",'select[name="background-repeat"]',(function(){let n=e(this),t={};t["background-repeat"]=n.val(),$set_hidden_value(n,t)})),e(document).on("change",'select[name="background-attachment"]',(function(){let n=e(this),t={};t["background-attachment"]=n.val(),$set_hidden_value(n,t)})),e(document).on("change keyup",'input[name="background-size"], input[name="custom_background_size_width_number"], select[name="custom_background_size_width_unit"], input[name="custom_background_size_height_number"], select[name="custom_background_size_height_unit"]',(function(){let n=e(this),t={};if("custom"===n.closest(".background-size-wrapper").find('input[name="background-size"]:checked').val()){let e=n.closest(".background-size-wrapper").find('input[name="custom_background_size_width_number"]').val(),i=n.closest(".background-size-wrapper").find('select[name="custom_background_size_width_unit"]').val(),a=n.closest(".background-size-wrapper").find('input[name="custom_background_size_height_number"]').val(),o=n.closest(".background-size-wrapper").find('select[name="custom_background_size_height_unit"]').val();t["background-size"]=`${e}${i} ${a}${o}`}else t["background-size"]=n.val();$set_hidden_value(n,t)}))}));