#!/usr/bin/env node
"use strict";const childProcess=require("child_process");const vnu=require("vnu-jar");childProcess.exec("java -version",(error,stdout,stderr)=>{if(error){console.error("Skipping vnu-jar test; Java is missing.");return}const is32bitJava=!/64-Bit/.test(stderr);const ignores=["Attribute “autocomplete” is only allowed when the input type is.*","Attribute “autocomplete” not allowed on element “button” at this point.","Element “legend” not allowed as child of element “div” in this context.*","The “date” input type is not supported in all browsers.*","The “time” input type is not supported in all browsers.*","The “main” role is unnecessary for element “main”."].join("|");const args=["-jar",vnu,"--asciiquotes","--skip-non-html","--no-langdetect","--Werror",`--filterpattern "${ignores}"`,"_gh_pages/","js/tests/"];if(is32bitJava){args.splice(0,0,"-Xss512k")}return childProcess.spawn("java",args,{shell:true,stdio:"inherit"}).on("exit",process.exit)});